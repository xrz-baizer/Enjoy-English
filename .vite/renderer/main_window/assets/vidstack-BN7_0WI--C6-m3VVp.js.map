{"version":3,"file":"vidstack-BN7_0WI--C6-m3VVp.js","sources":["../../../../node_modules/@vidstack/react/prod/chunks/vidstack-BN7_0WI-.js"],"sourcesContent":["\"use client\"\n\nimport { peek, listenEvent, effect, DOMEvent, camelToKebabCase, isString, isUndefined, isFunction } from './vidstack-CZgUA94N.js';\nimport { QualitySymbol, RAFLoop, TextTrack, TextTrackSymbol, ListSymbol, IS_CHROME, coerceToError, loadScript, VideoProvider, isHLSSupported, preconnect } from './vidstack-D5Pzx_k5.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nconst toDOMEventType = (type) => camelToKebabCase(type);\nclass HLSController {\n  #video;\n  #ctx;\n  #instance = null;\n  #stopLiveSync = null;\n  config = {};\n  #callbacks = /* @__PURE__ */ new Set();\n  get instance() {\n    return this.#instance;\n  }\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n  }\n  setup(ctor) {\n    const { streamType } = this.#ctx.$state;\n    const isLive = peek(streamType).includes(\"live\"), isLiveLowLatency = peek(streamType).includes(\"ll-\");\n    this.#instance = new ctor({\n      lowLatencyMode: isLiveLowLatency,\n      backBufferLength: isLiveLowLatency ? 4 : isLive ? 8 : void 0,\n      renderTextTracksNatively: false,\n      ...this.config\n    });\n    const dispatcher = this.#dispatchHLSEvent.bind(this);\n    for (const event of Object.values(ctor.Events)) this.#instance.on(event, dispatcher);\n    this.#instance.on(ctor.Events.ERROR, this.#onError.bind(this));\n    for (const callback of this.#callbacks) callback(this.#instance);\n    this.#ctx.player.dispatch(\"hls-instance\", {\n      detail: this.#instance\n    });\n    this.#instance.attachMedia(this.#video);\n    this.#instance.on(ctor.Events.AUDIO_TRACK_SWITCHED, this.#onAudioSwitch.bind(this));\n    this.#instance.on(ctor.Events.LEVEL_SWITCHED, this.#onLevelSwitched.bind(this));\n    this.#instance.on(ctor.Events.LEVEL_LOADED, this.#onLevelLoaded.bind(this));\n    this.#instance.on(ctor.Events.LEVEL_UPDATED, this.#onLevelUpdated.bind(this));\n    this.#instance.on(ctor.Events.NON_NATIVE_TEXT_TRACKS_FOUND, this.#onTracksFound.bind(this));\n    this.#instance.on(ctor.Events.CUES_PARSED, this.#onCuesParsed.bind(this));\n    this.#ctx.qualities[QualitySymbol.enableAuto] = this.#enableAutoQuality.bind(this);\n    listenEvent(this.#ctx.qualities, \"change\", this.#onUserQualityChange.bind(this));\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onUserAudioChange.bind(this));\n    this.#stopLiveSync = effect(this.#liveSync.bind(this));\n  }\n  #createDOMEvent(type, data) {\n    return new DOMEvent(toDOMEventType(type), { detail: data });\n  }\n  #liveSync() {\n    if (!this.#ctx.$state.live()) return;\n    const raf = new RAFLoop(this.#liveSyncPosition.bind(this));\n    raf.start();\n    return raf.stop.bind(raf);\n  }\n  #liveSyncPosition() {\n    this.#ctx.$state.liveSyncPosition.set(this.#instance?.liveSyncPosition ?? Infinity);\n  }\n  #dispatchHLSEvent(type, data) {\n    this.#ctx.player?.dispatch(this.#createDOMEvent(type, data));\n  }\n  #onTracksFound(eventType, data) {\n    const event = this.#createDOMEvent(eventType, data);\n    let currentTrack = -1;\n    for (let i = 0; i < data.tracks.length; i++) {\n      const nonNativeTrack = data.tracks[i], init = nonNativeTrack.subtitleTrack ?? nonNativeTrack.closedCaptions, track = new TextTrack({\n        id: `hls-${nonNativeTrack.kind}-${i}`,\n        src: init?.url,\n        label: nonNativeTrack.label,\n        language: init?.lang,\n        kind: nonNativeTrack.kind,\n        default: nonNativeTrack.default\n      });\n      track[TextTrackSymbol.readyState] = 2;\n      track[TextTrackSymbol.onModeChange] = () => {\n        if (track.mode === \"showing\") {\n          this.#instance.subtitleTrack = i;\n          currentTrack = i;\n        } else if (currentTrack === i) {\n          this.#instance.subtitleTrack = -1;\n          currentTrack = -1;\n        }\n      };\n      this.#ctx.textTracks.add(track, event);\n    }\n  }\n  #onCuesParsed(eventType, data) {\n    const index = this.#instance?.subtitleTrack, track = this.#ctx.textTracks.getById(`hls-${data.type}-${index}`);\n    if (!track) return;\n    const event = this.#createDOMEvent(eventType, data);\n    for (const cue of data.cues) {\n      cue.positionAlign = \"auto\";\n      track.addCue(cue, event);\n    }\n  }\n  #onAudioSwitch(eventType, data) {\n    const track = this.#ctx.audioTracks[data.id];\n    if (track) {\n      const trigger = this.#createDOMEvent(eventType, data);\n      this.#ctx.audioTracks[ListSymbol.select](track, true, trigger);\n    }\n  }\n  #onLevelSwitched(eventType, data) {\n    const quality = this.#ctx.qualities[data.level];\n    if (quality) {\n      const trigger = this.#createDOMEvent(eventType, data);\n      this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n  }\n  #onLevelUpdated(eventType, data) {\n    if (data.details.totalduration > 0) {\n      this.#ctx.$state.inferredLiveDVRWindow.set(data.details.totalduration);\n    }\n  }\n  #onLevelLoaded(eventType, data) {\n    if (this.#ctx.$state.canPlay()) return;\n    const { type, live, totalduration: duration, targetduration } = data.details, trigger = this.#createDOMEvent(eventType, data);\n    this.#ctx.notify(\n      \"stream-type-change\",\n      live ? type === \"EVENT\" && Number.isFinite(duration) && targetduration >= 10 ? \"live:dvr\" : \"live\" : \"on-demand\",\n      trigger\n    );\n    this.#ctx.notify(\"duration-change\", duration, trigger);\n    const media = this.#instance.media;\n    if (this.#instance.currentLevel === -1) {\n      this.#ctx.qualities[QualitySymbol.setAuto](true, trigger);\n    }\n    for (const remoteTrack of this.#instance.audioTracks) {\n      const localTrack = {\n        id: remoteTrack.id.toString(),\n        label: remoteTrack.name,\n        language: remoteTrack.lang || \"\",\n        kind: \"main\"\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localTrack, trigger);\n    }\n    for (const level of this.#instance.levels) {\n      const videoQuality = {\n        id: level.id?.toString() ?? level.height + \"p\",\n        width: level.width,\n        height: level.height,\n        codec: level.codecSet,\n        bitrate: level.bitrate\n      };\n      this.#ctx.qualities[ListSymbol.add](videoQuality, trigger);\n    }\n    media.dispatchEvent(new DOMEvent(\"canplay\", { trigger }));\n  }\n  #onError(eventType, data) {\n    if (data.fatal) {\n      switch (data.type) {\n        case \"mediaError\":\n          this.#instance?.recoverMediaError();\n          break;\n        default:\n          this.#onFatalError(data.error);\n          break;\n      }\n    }\n  }\n  #onFatalError(error) {\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 1,\n      error\n    });\n  }\n  #enableAutoQuality() {\n    if (this.#instance) this.#instance.currentLevel = -1;\n  }\n  #onUserQualityChange() {\n    const { qualities } = this.#ctx;\n    if (!this.#instance || qualities.auto) return;\n    this.#instance[qualities.switch + \"Level\"] = qualities.selectedIndex;\n    if (IS_CHROME) {\n      this.#video.currentTime = this.#video.currentTime;\n    }\n  }\n  #onUserAudioChange() {\n    const { audioTracks } = this.#ctx;\n    if (this.#instance && this.#instance.audioTrack !== audioTracks.selectedIndex) {\n      this.#instance.audioTrack = audioTracks.selectedIndex;\n    }\n  }\n  onInstance(callback) {\n    this.#callbacks.add(callback);\n    return () => this.#callbacks.delete(callback);\n  }\n  loadSource(src) {\n    if (!isString(src.src)) return;\n    this.#instance?.loadSource(src.src);\n  }\n  destroy() {\n    this.#instance?.destroy();\n    this.#instance = null;\n    this.#stopLiveSync?.();\n    this.#stopLiveSync = null;\n  }\n}\n\nclass HLSLibLoader {\n  #lib;\n  #ctx;\n  #callback;\n  constructor(lib, ctx, callback) {\n    this.#lib = lib;\n    this.#ctx = ctx;\n    this.#callback = callback;\n    this.#startLoading();\n  }\n  async #startLoading() {\n    const callbacks = {\n      onLoadStart: this.#onLoadStart.bind(this),\n      onLoaded: this.#onLoaded.bind(this),\n      onLoadError: this.#onLoadError.bind(this)\n    };\n    let ctor = await loadHLSScript(this.#lib, callbacks);\n    if (isUndefined(ctor) && !isString(this.#lib)) ctor = await importHLS(this.#lib, callbacks);\n    if (!ctor) return null;\n    if (!ctor.isSupported()) {\n      const message = \"[vidstack] `hls.js` is not supported in this environment\";\n      this.#ctx.player.dispatch(new DOMEvent(\"hls-unsupported\"));\n      this.#ctx.notify(\"error\", { message, code: 4 });\n      return null;\n    }\n    return ctor;\n  }\n  #onLoadStart() {\n    this.#ctx.player.dispatch(new DOMEvent(\"hls-lib-load-start\"));\n  }\n  #onLoaded(ctor) {\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"hls-lib-loaded\", {\n        detail: ctor\n      })\n    );\n    this.#callback(ctor);\n  }\n  #onLoadError(e) {\n    const error = coerceToError(e);\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"hls-lib-load-error\", {\n        detail: error\n      })\n    );\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importHLS(loader, callbacks = {}) {\n  if (isUndefined(loader)) return void 0;\n  callbacks.onLoadStart?.();\n  if (loader.prototype && loader.prototype !== Function) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (ctor && !!ctor.isSupported) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(\n        false ? \"[vidstack] failed importing `hls.js`. Dynamic import returned invalid constructor.\" : \"\"\n      );\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadHLSScript(src, callbacks = {}) {\n  if (!isString(src)) return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.Hls)) {\n      throw Error(\n        false ? \"[vidstack] failed loading `hls.js`. Could not find a valid `Hls` constructor on window\" : \"\"\n      );\n    }\n    const ctor = window.Hls;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\n\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass HLSProvider extends VideoProvider {\n  $$PROVIDER_TYPE = \"HLS\";\n  #ctor = null;\n  #controller = new HLSController(this.video, this.ctx);\n  /**\n   * The `hls.js` constructor.\n   */\n  get ctor() {\n    return this.#ctor;\n  }\n  /**\n   * The current `hls.js` instance.\n   */\n  get instance() {\n    return this.#controller.instance;\n  }\n  /**\n   * Whether `hls.js` is supported in this environment.\n   */\n  static supported = isHLSSupported();\n  get type() {\n    return \"hls\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  #library = `${JS_DELIVR_CDN}/npm/hls.js@^1.5.0/dist/hls${\".min.js\"}`;\n  /**\n   * The `hls.js` configuration object.\n   *\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning}\n   */\n  get config() {\n    return this.#controller.config;\n  }\n  set config(config) {\n    this.#controller.config = config;\n  }\n  /**\n   * The `hls.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js`\n   */\n  get library() {\n    return this.#library;\n  }\n  set library(library) {\n    this.#library = library;\n  }\n  preconnect() {\n    if (!isString(this.#library)) return;\n    preconnect(this.#library);\n  }\n  setup() {\n    super.setup();\n    new HLSLibLoader(this.#library, this.ctx, (ctor) => {\n      this.#ctor = ctor;\n      this.#controller.setup(ctor);\n      this.ctx.notify(\"provider-setup\", this);\n      const src = peek(this.ctx.$state.source);\n      if (src) this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.removeSource();\n      return;\n    }\n    this.media.preload = preload || \"\";\n    this.appendSource(src, \"application/x-mpegurl\");\n    this.#controller.loadSource(src);\n    this.currentSrc = src;\n  }\n  /**\n   * The given callback is invoked when a new `hls.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.#controller.instance;\n    if (instance) callback(instance);\n    return this.#controller.onInstance(callback);\n  }\n  destroy() {\n    this.#controller.destroy();\n  }\n}\n\nexport { HLSProvider };\n"],"names":["toDOMEventType","type","camelToKebabCase","HLSController","#video","#ctx","#instance","#stopLiveSync","#callbacks","video","ctx","ctor","streamType","isLive","peek","isLiveLowLatency","dispatcher","#dispatchHLSEvent","event","#onError","callback","#onAudioSwitch","#onLevelSwitched","#onLevelLoaded","#onLevelUpdated","#onTracksFound","#onCuesParsed","QualitySymbol","#enableAutoQuality","listenEvent","#onUserQualityChange","#onUserAudioChange","effect","#liveSync","#createDOMEvent","data","DOMEvent","raf","RAFLoop","#liveSyncPosition","eventType","currentTrack","i","nonNativeTrack","init","track","TextTrack","TextTrackSymbol","index","cue","trigger","ListSymbol","quality","live","duration","targetduration","media","remoteTrack","localTrack","level","videoQuality","#onFatalError","error","qualities","IS_CHROME","audioTracks","src","isString","HLSLibLoader","#lib","#callback","lib","#startLoading","callbacks","#onLoadStart","#onLoaded","#onLoadError","loadHLSScript","isUndefined","importHLS","message","e","coerceToError","loader","err","loadScript","isFunction","JS_DELIVR_CDN","HLSProvider","VideoProvider","#ctor","#controller","isHLSSupported","#library","config","library","preconnect","preload","instance"],"mappings":"sKAOA,MAAMA,EAAkBC,GAASC,EAAiBD,CAAI,EACtD,MAAME,CAAc,CAClBC,GACAC,GACAC,GAAY,KACZC,GAAgB,KAChB,OAAS,CAAA,EACTC,GAA6B,IAAI,IACjC,IAAI,UAAW,CACb,OAAO,KAAKF,EACd,CACA,YAAYG,EAAOC,EAAK,CACtB,KAAKN,GAASK,EACd,KAAKJ,GAAOK,CACd,CACA,MAAMC,EAAM,CACV,KAAM,CAAE,WAAAC,CAAU,EAAK,KAAKP,GAAK,OAC3BQ,EAASC,EAAKF,CAAU,EAAE,SAAS,MAAM,EAAGG,EAAmBD,EAAKF,CAAU,EAAE,SAAS,KAAK,EACpG,KAAKN,GAAY,IAAIK,EAAK,CACxB,eAAgBI,EAChB,iBAAkBA,EAAmB,EAAIF,EAAS,EAAI,OACtD,yBAA0B,GAC1B,GAAG,KAAK,MACd,CAAK,EACD,MAAMG,EAAa,KAAKC,GAAkB,KAAK,IAAI,EACnD,UAAWC,KAAS,OAAO,OAAOP,EAAK,MAAM,EAAG,KAAKL,GAAU,GAAGY,EAAOF,CAAU,EACnF,KAAKV,GAAU,GAAGK,EAAK,OAAO,MAAO,KAAKQ,GAAS,KAAK,IAAI,CAAC,EAC7D,UAAWC,KAAY,KAAKZ,GAAYY,EAAS,KAAKd,EAAS,EAC/D,KAAKD,GAAK,OAAO,SAAS,eAAgB,CACxC,OAAQ,KAAKC,EACnB,CAAK,EACD,KAAKA,GAAU,YAAY,KAAKF,EAAM,EACtC,KAAKE,GAAU,GAAGK,EAAK,OAAO,qBAAsB,KAAKU,GAAe,KAAK,IAAI,CAAC,EAClF,KAAKf,GAAU,GAAGK,EAAK,OAAO,eAAgB,KAAKW,GAAiB,KAAK,IAAI,CAAC,EAC9E,KAAKhB,GAAU,GAAGK,EAAK,OAAO,aAAc,KAAKY,GAAe,KAAK,IAAI,CAAC,EAC1E,KAAKjB,GAAU,GAAGK,EAAK,OAAO,cAAe,KAAKa,GAAgB,KAAK,IAAI,CAAC,EAC5E,KAAKlB,GAAU,GAAGK,EAAK,OAAO,6BAA8B,KAAKc,GAAe,KAAK,IAAI,CAAC,EAC1F,KAAKnB,GAAU,GAAGK,EAAK,OAAO,YAAa,KAAKe,GAAc,KAAK,IAAI,CAAC,EACxE,KAAKrB,GAAK,UAAUsB,EAAc,UAAU,EAAI,KAAKC,GAAmB,KAAK,IAAI,EACjFC,EAAY,KAAKxB,GAAK,UAAW,SAAU,KAAKyB,GAAqB,KAAK,IAAI,CAAC,EAC/ED,EAAY,KAAKxB,GAAK,YAAa,SAAU,KAAK0B,GAAmB,KAAK,IAAI,CAAC,EAC/E,KAAKxB,GAAgByB,EAAO,KAAKC,GAAU,KAAK,IAAI,CAAC,CACvD,CACAC,GAAgBjC,EAAMkC,EAAM,CAC1B,OAAO,IAAIC,EAASpC,EAAeC,CAAI,EAAG,CAAE,OAAQkC,EAAM,CAC5D,CACAF,IAAY,CACV,GAAI,CAAC,KAAK5B,GAAK,OAAO,KAAI,EAAI,OAC9B,MAAMgC,EAAM,IAAIC,EAAQ,KAAKC,GAAkB,KAAK,IAAI,CAAC,EACzD,OAAAF,EAAI,MAAK,EACFA,EAAI,KAAK,KAAKA,CAAG,CAC1B,CACAE,IAAoB,CAClB,KAAKlC,GAAK,OAAO,iBAAiB,IAAI,KAAKC,IAAW,kBAAoB,GAAQ,CACpF,CACAW,GAAkBhB,EAAMkC,EAAM,CAC5B,KAAK9B,GAAK,QAAQ,SAAS,KAAK6B,GAAgBjC,EAAMkC,CAAI,CAAC,CAC7D,CACAV,GAAee,EAAWL,EAAM,CAC9B,MAAMjB,EAAQ,KAAKgB,GAAgBM,EAAWL,CAAI,EAClD,IAAIM,EAAe,GACnB,QAASC,EAAI,EAAGA,EAAIP,EAAK,OAAO,OAAQO,IAAK,CAC3C,MAAMC,EAAiBR,EAAK,OAAOO,CAAC,EAAGE,EAAOD,EAAe,eAAiBA,EAAe,eAAgBE,EAAQ,IAAIC,EAAU,CACjI,GAAI,OAAOH,EAAe,IAAI,IAAID,CAAC,GACnC,IAAKE,GAAM,IACX,MAAOD,EAAe,MACtB,SAAUC,GAAM,KAChB,KAAMD,EAAe,KACrB,QAASA,EAAe,OAChC,CAAO,EACDE,EAAME,EAAgB,UAAU,EAAI,EACpCF,EAAME,EAAgB,YAAY,EAAI,IAAM,CACtCF,EAAM,OAAS,WACjB,KAAKvC,GAAU,cAAgBoC,EAC/BD,EAAeC,GACND,IAAiBC,IAC1B,KAAKpC,GAAU,cAAgB,GAC/BmC,EAAe,GAEnB,EACA,KAAKpC,GAAK,WAAW,IAAIwC,EAAO3B,CAAK,CACvC,CACF,CACAQ,GAAcc,EAAWL,EAAM,CAC7B,MAAMa,EAAQ,KAAK1C,IAAW,cAAeuC,EAAQ,KAAKxC,GAAK,WAAW,QAAQ,OAAO8B,EAAK,IAAI,IAAIa,CAAK,EAAE,EAC7G,GAAI,CAACH,EAAO,OACZ,MAAM3B,EAAQ,KAAKgB,GAAgBM,EAAWL,CAAI,EAClD,UAAWc,KAAOd,EAAK,KACrBc,EAAI,cAAgB,OACpBJ,EAAM,OAAOI,EAAK/B,CAAK,CAE3B,CACAG,GAAemB,EAAWL,EAAM,CAC9B,MAAMU,EAAQ,KAAKxC,GAAK,YAAY8B,EAAK,EAAE,EAC3C,GAAIU,EAAO,CACT,MAAMK,EAAU,KAAKhB,GAAgBM,EAAWL,CAAI,EACpD,KAAK9B,GAAK,YAAY8C,EAAW,MAAM,EAAEN,EAAO,GAAMK,CAAO,CAC/D,CACF,CACA5B,GAAiBkB,EAAWL,EAAM,CAChC,MAAMiB,EAAU,KAAK/C,GAAK,UAAU8B,EAAK,KAAK,EAC9C,GAAIiB,EAAS,CACX,MAAMF,EAAU,KAAKhB,GAAgBM,EAAWL,CAAI,EACpD,KAAK9B,GAAK,UAAU8C,EAAW,MAAM,EAAEC,EAAS,GAAMF,CAAO,CAC/D,CACF,CACA1B,GAAgBgB,EAAWL,EAAM,CAC3BA,EAAK,QAAQ,cAAgB,GAC/B,KAAK9B,GAAK,OAAO,sBAAsB,IAAI8B,EAAK,QAAQ,aAAa,CAEzE,CACAZ,GAAeiB,EAAWL,EAAM,CAC9B,GAAI,KAAK9B,GAAK,OAAO,QAAO,EAAI,OAChC,KAAM,CAAE,KAAAJ,EAAM,KAAAoD,EAAM,cAAeC,EAAU,eAAAC,CAAc,EAAKpB,EAAK,QAASe,EAAU,KAAKhB,GAAgBM,EAAWL,CAAI,EAC5H,KAAK9B,GAAK,OACR,qBACAgD,EAAOpD,IAAS,SAAW,OAAO,SAASqD,CAAQ,GAAKC,GAAkB,GAAK,WAAa,OAAS,YACrGL,CACN,EACI,KAAK7C,GAAK,OAAO,kBAAmBiD,EAAUJ,CAAO,EACrD,MAAMM,EAAQ,KAAKlD,GAAU,MACzB,KAAKA,GAAU,eAAiB,IAClC,KAAKD,GAAK,UAAUsB,EAAc,OAAO,EAAE,GAAMuB,CAAO,EAE1D,UAAWO,KAAe,KAAKnD,GAAU,YAAa,CACpD,MAAMoD,EAAa,CACjB,GAAID,EAAY,GAAG,SAAQ,EAC3B,MAAOA,EAAY,KACnB,SAAUA,EAAY,MAAQ,GAC9B,KAAM,MACd,EACM,KAAKpD,GAAK,YAAY8C,EAAW,GAAG,EAAEO,EAAYR,CAAO,CAC3D,CACA,UAAWS,KAAS,KAAKrD,GAAU,OAAQ,CACzC,MAAMsD,EAAe,CACnB,GAAID,EAAM,IAAI,SAAQ,GAAMA,EAAM,OAAS,IAC3C,MAAOA,EAAM,MACb,OAAQA,EAAM,OACd,MAAOA,EAAM,SACb,QAASA,EAAM,OACvB,EACM,KAAKtD,GAAK,UAAU8C,EAAW,GAAG,EAAES,EAAcV,CAAO,CAC3D,CACAM,EAAM,cAAc,IAAIpB,EAAS,UAAW,CAAE,QAAAc,CAAO,CAAE,CAAC,CAC1D,CACA/B,GAASqB,EAAWL,EAAM,CACxB,GAAIA,EAAK,MACP,OAAQA,EAAK,KAAI,CACf,IAAK,aACH,KAAK7B,IAAW,kBAAiB,EACjC,MACF,QACE,KAAKuD,GAAc1B,EAAK,KAAK,EAC7B,KACV,CAEE,CACA0B,GAAcC,EAAO,CACnB,KAAKzD,GAAK,OAAO,QAAS,CACxB,QAASyD,EAAM,QACf,KAAM,EACN,MAAAA,CACN,CAAK,CACH,CACAlC,IAAqB,CACf,KAAKtB,KAAW,KAAKA,GAAU,aAAe,GACpD,CACAwB,IAAuB,CACrB,KAAM,CAAE,UAAAiC,GAAc,KAAK1D,GACvB,CAAC,KAAKC,IAAayD,EAAU,OACjC,KAAKzD,GAAUyD,EAAU,OAAS,OAAO,EAAIA,EAAU,cACnDC,IACF,KAAK5D,GAAO,YAAc,KAAKA,GAAO,aAE1C,CACA2B,IAAqB,CACnB,KAAM,CAAE,YAAAkC,GAAgB,KAAK5D,GACzB,KAAKC,IAAa,KAAKA,GAAU,aAAe2D,EAAY,gBAC9D,KAAK3D,GAAU,WAAa2D,EAAY,cAE5C,CACA,WAAW7C,EAAU,CACnB,YAAKZ,GAAW,IAAIY,CAAQ,EACrB,IAAM,KAAKZ,GAAW,OAAOY,CAAQ,CAC9C,CACA,WAAW8C,EAAK,CACTC,EAASD,EAAI,GAAG,GACrB,KAAK5D,IAAW,WAAW4D,EAAI,GAAG,CACpC,CACA,SAAU,CACR,KAAK5D,IAAW,QAAO,EACvB,KAAKA,GAAY,KACjB,KAAKC,KAAa,EAClB,KAAKA,GAAgB,IACvB,CACF,CAEA,MAAM6D,CAAa,CACjBC,GACAhE,GACAiE,GACA,YAAYC,EAAK7D,EAAKU,EAAU,CAC9B,KAAKiD,GAAOE,EACZ,KAAKlE,GAAOK,EACZ,KAAK4D,GAAYlD,EACjB,KAAKoD,GAAa,CACpB,CACA,KAAMA,IAAgB,CACpB,MAAMC,EAAY,CAChB,YAAa,KAAKC,GAAa,KAAK,IAAI,EACxC,SAAU,KAAKC,GAAU,KAAK,IAAI,EAClC,YAAa,KAAKC,GAAa,KAAK,IAAI,CAC9C,EACI,IAAIjE,EAAO,MAAMkE,EAAc,KAAKR,GAAMI,CAAS,EAEnD,GADIK,EAAYnE,CAAI,GAAK,CAACwD,EAAS,KAAKE,EAAI,IAAG1D,EAAO,MAAMoE,EAAU,KAAKV,GAAMI,CAAS,GACtF,CAAC9D,EAAM,OAAO,KAClB,GAAI,CAACA,EAAK,cAAe,CACvB,MAAMqE,EAAU,2DAChB,YAAK3E,GAAK,OAAO,SAAS,IAAI+B,EAAS,iBAAiB,CAAC,EACzD,KAAK/B,GAAK,OAAO,QAAS,CAAE,QAAA2E,EAAS,KAAM,EAAG,EACvC,IACT,CACA,OAAOrE,CACT,CACA+D,IAAe,CACb,KAAKrE,GAAK,OAAO,SAAS,IAAI+B,EAAS,oBAAoB,CAAC,CAC9D,CACAuC,GAAUhE,EAAM,CACd,KAAKN,GAAK,OAAO,SACf,IAAI+B,EAAS,iBAAkB,CAC7B,OAAQzB,CAChB,CAAO,CACP,EACI,KAAK2D,GAAU3D,CAAI,CACrB,CACAiE,GAAaK,EAAG,CACd,MAAMnB,EAAQoB,EAAcD,CAAC,EAC7B,KAAK5E,GAAK,OAAO,SACf,IAAI+B,EAAS,qBAAsB,CACjC,OAAQ0B,CAChB,CAAO,CACP,EACI,KAAKzD,GAAK,OAAO,QAAS,CACxB,QAASyD,EAAM,QACf,KAAM,EACN,MAAAA,CACN,CAAK,CACH,CACF,CACA,eAAeiB,EAAUI,EAAQV,EAAY,GAAI,CAC/C,GAAI,CAAAK,EAAYK,CAAM,EAEtB,IADAV,EAAU,cAAW,EACjBU,EAAO,WAAaA,EAAO,YAAc,SAC3C,OAAAV,EAAU,WAAWU,CAAM,EACpBA,EAET,GAAI,CACF,MAAMxE,GAAQ,MAAMwE,EAAM,IAAK,QAC/B,GAAIxE,GAAUA,EAAK,YACjB8D,EAAU,WAAW9D,CAAI,MAEzB,OAAM,MAC2F,EACvG,EAEI,OAAOA,CACT,OAASyE,EAAK,CACZX,EAAU,cAAcW,CAAG,CAC7B,EAEF,CACA,eAAeP,EAAcX,EAAKO,EAAY,GAAI,CAChD,GAAKN,EAASD,CAAG,EACjB,CAAAO,EAAU,cAAW,EACrB,GAAI,CAEF,GADA,MAAMY,EAAWnB,CAAG,EAChB,CAACoB,EAAW,OAAO,GAAG,EACxB,MAAM,MAC+F,EAC3G,EAEI,MAAM3E,EAAO,OAAO,IACpB,OAAA8D,EAAU,WAAW9D,CAAI,EAClBA,CACT,OAASyE,EAAK,CACZX,EAAU,cAAcW,CAAG,CAC7B,EAEF,CAEA,MAAMG,EAAgB,2BACtB,MAAMC,UAAoBC,CAAc,CACtC,gBAAkB,MAClBC,GAAQ,KACRC,GAAc,IAAIxF,EAAc,KAAK,MAAO,KAAK,GAAG,EAIpD,IAAI,MAAO,CACT,OAAO,KAAKuF,EACd,CAIA,IAAI,UAAW,CACb,OAAO,KAAKC,GAAY,QAC1B,CAIA,OAAO,UAAYC,EAAc,EACjC,IAAI,MAAO,CACT,MAAO,KACT,CACA,IAAI,aAAc,CAChB,MAAO,EACT,CACAC,GAAW,GAAGN,CAAa,qCAM3B,IAAI,QAAS,CACX,OAAO,KAAKI,GAAY,MAC1B,CACA,IAAI,OAAOG,EAAQ,CACjB,KAAKH,GAAY,OAASG,CAC5B,CAMA,IAAI,SAAU,CACZ,OAAO,KAAKD,EACd,CACA,IAAI,QAAQE,EAAS,CACnB,KAAKF,GAAWE,CAClB,CACA,YAAa,CACN5B,EAAS,KAAK0B,EAAQ,GAC3BG,EAAW,KAAKH,EAAQ,CAC1B,CACA,OAAQ,CACN,MAAM,MAAK,EACX,IAAIzB,EAAa,KAAKyB,GAAU,KAAK,IAAMlF,GAAS,CAClD,KAAK+E,GAAQ/E,EACb,KAAKgF,GAAY,MAAMhF,CAAI,EAC3B,KAAK,IAAI,OAAO,iBAAkB,IAAI,EACtC,MAAMuD,EAAMpD,EAAK,KAAK,IAAI,OAAO,MAAM,EACnCoD,GAAK,KAAK,WAAWA,CAAG,CAC9B,CAAC,CACH,CACA,MAAM,WAAWA,EAAK+B,EAAS,CAC7B,GAAI,CAAC9B,EAASD,EAAI,GAAG,EAAG,CACtB,KAAK,aAAY,EACjB,MACF,CACA,KAAK,MAAM,QAAU+B,GAAW,GAChC,KAAK,aAAa/B,EAAK,uBAAuB,EAC9C,KAAKyB,GAAY,WAAWzB,CAAG,EAC/B,KAAK,WAAaA,CACpB,CAKA,WAAW9C,EAAU,CACnB,MAAM8E,EAAW,KAAKP,GAAY,SAClC,OAAIO,GAAU9E,EAAS8E,CAAQ,EACxB,KAAKP,GAAY,WAAWvE,CAAQ,CAC7C,CACA,SAAU,CACR,KAAKuE,GAAY,QAAO,CAC1B,CACF","x_google_ignoreList":[0]}