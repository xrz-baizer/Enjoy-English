{"version":3,"file":"vidstack-BqgQkvb4-B7h5bim_.js","sources":["../../../../node_modules/@vidstack/react/prod/chunks/vidstack-BqgQkvb4.js"],"sourcesContent":["\"use client\"\n\nimport { createScope, signal, effect, peek, isString, deferredPromise, listenEvent, isArray } from './vidstack-CZgUA94N.js';\nimport { TimeRange, RAFLoop, preconnect, ListSymbol, TextTrack, QualitySymbol } from './vidstack-D5Pzx_k5.js';\nimport { EmbedProvider } from './vidstack-FldwQc2Q.js';\nimport { resolveVimeoVideoId, getVimeoVideoInfo } from './vidstack-krOAtKMi.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nconst trackedVimeoEvents = [\n  \"bufferend\",\n  \"bufferstart\",\n  // 'cuechange',\n  \"durationchange\",\n  \"ended\",\n  \"enterpictureinpicture\",\n  \"error\",\n  \"fullscreenchange\",\n  \"leavepictureinpicture\",\n  \"loaded\",\n  // 'loadeddata',\n  // 'loadedmetadata',\n  // 'loadstart',\n  \"playProgress\",\n  \"loadProgress\",\n  \"pause\",\n  \"play\",\n  \"playbackratechange\",\n  // 'progress',\n  \"qualitychange\",\n  \"seeked\",\n  \"seeking\",\n  // 'texttrackchange',\n  \"timeupdate\",\n  \"volumechange\",\n  \"waiting\"\n  // 'adstarted',\n  // 'adcompleted',\n  // 'aderror',\n  // 'adskipped',\n  // 'adallcompleted',\n  // 'adclicked',\n  // 'chapterchange',\n  // 'chromecastconnected',\n  // 'remoteplaybackavailabilitychange',\n  // 'remoteplaybackconnecting',\n  // 'remoteplaybackconnect',\n  // 'remoteplaybackdisconnect',\n  // 'liveeventended',\n  // 'liveeventstarted',\n  // 'livestreamoffline',\n  // 'livestreamonline',\n];\n\nclass VimeoProvider extends EmbedProvider {\n  $$PROVIDER_TYPE = \"VIMEO\";\n  scope = createScope();\n  fullscreen;\n  #ctx;\n  #videoId = signal(\"\");\n  #pro = signal(false);\n  #hash = null;\n  #currentSrc = null;\n  #fullscreenActive = false;\n  #seekableRange = new TimeRange(0, 0);\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #currentCue = null;\n  #chaptersTrack = null;\n  #promises = /* @__PURE__ */ new Map();\n  #videoInfoPromise = null;\n  constructor(iframe, ctx) {\n    super(iframe);\n    this.#ctx = ctx;\n    const self = this;\n    this.fullscreen = {\n      get active() {\n        return self.#fullscreenActive;\n      },\n      supported: true,\n      enter: () => this.#remote(\"requestFullscreen\"),\n      exit: () => this.#remote(\"exitFullscreen\")\n    };\n  }\n  /**\n   * Whether tracking session data should be enabled on the embed, including cookies and analytics.\n   * This is turned off by default to be GDPR-compliant.\n   *\n   * @defaultValue `false`\n   */\n  cookies = false;\n  title = true;\n  byline = true;\n  portrait = true;\n  color = \"00ADEF\";\n  get type() {\n    return \"vimeo\";\n  }\n  get currentSrc() {\n    return this.#currentSrc;\n  }\n  get videoId() {\n    return this.#videoId();\n  }\n  get hash() {\n    return this.#hash;\n  }\n  get isPro() {\n    return this.#pro();\n  }\n  preconnect() {\n    preconnect(this.getOrigin());\n  }\n  setup() {\n    super.setup();\n    effect(this.#watchVideoId.bind(this));\n    effect(this.#watchVideoInfo.bind(this));\n    effect(this.#watchPro.bind(this));\n    this.#ctx.notify(\"provider-setup\", this);\n  }\n  destroy() {\n    this.#reset();\n    this.fullscreen = void 0;\n    const message = \"provider destroyed\";\n    for (const promises of this.#promises.values()) {\n      for (const { reject } of promises) reject(message);\n    }\n    this.#promises.clear();\n    this.#remote(\"destroy\");\n  }\n  async play() {\n    return this.#remote(\"play\");\n  }\n  async pause() {\n    return this.#remote(\"pause\");\n  }\n  setMuted(muted) {\n    this.#remote(\"setMuted\", muted);\n  }\n  setCurrentTime(time) {\n    this.#remote(\"seekTo\", time);\n    this.#ctx.notify(\"seeking\", time);\n  }\n  setVolume(volume) {\n    this.#remote(\"setVolume\", volume);\n    this.#remote(\"setMuted\", peek(this.#ctx.$state.muted));\n  }\n  setPlaybackRate(rate) {\n    this.#remote(\"setPlaybackRate\", rate);\n  }\n  async loadSource(src) {\n    if (!isString(src.src)) {\n      this.#currentSrc = null;\n      this.#hash = null;\n      this.#videoId.set(\"\");\n      return;\n    }\n    const { videoId, hash } = resolveVimeoVideoId(src.src);\n    this.#videoId.set(videoId ?? \"\");\n    this.#hash = hash ?? null;\n    this.#currentSrc = src;\n  }\n  #watchVideoId() {\n    this.#reset();\n    const videoId = this.#videoId();\n    if (!videoId) {\n      this.src.set(\"\");\n      return;\n    }\n    this.src.set(`${this.getOrigin()}/video/${videoId}`);\n    this.#ctx.notify(\"load-start\");\n  }\n  #watchVideoInfo() {\n    const videoId = this.#videoId();\n    if (!videoId) return;\n    const promise = deferredPromise(), abort = new AbortController();\n    this.#videoInfoPromise = promise;\n    getVimeoVideoInfo(videoId, abort, this.#hash).then((info) => {\n      promise.resolve(info);\n    }).catch((e) => {\n      promise.reject();\n    });\n    return () => {\n      promise.reject();\n      abort.abort();\n    };\n  }\n  #watchPro() {\n    const isPro = this.#pro(), { $state, qualities } = this.#ctx;\n    $state.canSetPlaybackRate.set(isPro);\n    qualities[ListSymbol.setReadonly](!isPro);\n    if (isPro) {\n      return listenEvent(qualities, \"change\", () => {\n        if (qualities.auto) return;\n        const id = qualities.selected?.id;\n        if (id) this.#remote(\"setQuality\", id);\n      });\n    }\n  }\n  getOrigin() {\n    return \"https://player.vimeo.com\";\n  }\n  buildParams() {\n    const { keyDisabled } = this.#ctx.$props, { playsInline, nativeControls } = this.#ctx.$state, showControls = nativeControls();\n    return {\n      title: this.title,\n      byline: this.byline,\n      color: this.color,\n      portrait: this.portrait,\n      controls: showControls,\n      h: this.hash,\n      keyboard: showControls && !keyDisabled(),\n      transparent: true,\n      playsinline: playsInline(),\n      dnt: !this.cookies\n    };\n  }\n  #onAnimationFrame() {\n    this.#remote(\"getCurrentTime\");\n  }\n  // Embed will sometimes dispatch 0 at end of playback.\n  #preventTimeUpdates = false;\n  #onTimeUpdate(time, trigger) {\n    if (this.#preventTimeUpdates && time === 0) return;\n    const { realCurrentTime, paused, bufferedEnd, seekableEnd, live } = this.#ctx.$state;\n    if (realCurrentTime() === time) return;\n    const prevTime = realCurrentTime();\n    this.#ctx.notify(\"time-change\", time, trigger);\n    if (Math.abs(prevTime - time) > 1.5) {\n      this.#ctx.notify(\"seeking\", time, trigger);\n      if (!paused() && bufferedEnd() < time) {\n        this.#ctx.notify(\"waiting\", void 0, trigger);\n      }\n    }\n    if (!live() && seekableEnd() - time < 0.01) {\n      this.#ctx.notify(\"end\", void 0, trigger);\n      this.#preventTimeUpdates = true;\n      setTimeout(() => {\n        this.#preventTimeUpdates = false;\n      }, 500);\n    }\n  }\n  #onSeeked(time, trigger) {\n    this.#ctx.notify(\"seeked\", time, trigger);\n  }\n  #onLoaded(trigger) {\n    const videoId = this.#videoId();\n    this.#videoInfoPromise?.promise.then((info) => {\n      if (!info) return;\n      const { title, poster, duration, pro } = info;\n      this.#pro.set(pro);\n      this.#ctx.notify(\"title-change\", title, trigger);\n      this.#ctx.notify(\"poster-change\", poster, trigger);\n      this.#ctx.notify(\"duration-change\", duration, trigger);\n      this.#onReady(duration, trigger);\n    }).catch(() => {\n      if (videoId !== this.#videoId()) return;\n      this.#remote(\"getVideoTitle\");\n      this.#remote(\"getDuration\");\n    });\n  }\n  #onReady(duration, trigger) {\n    const { nativeControls } = this.#ctx.$state, showEmbedControls = nativeControls();\n    this.#seekableRange = new TimeRange(0, duration);\n    const detail = {\n      buffered: new TimeRange(0, 0),\n      seekable: this.#seekableRange,\n      duration\n    };\n    this.#ctx.delegate.ready(detail, trigger);\n    if (!showEmbedControls) {\n      this.#remote(\"_hideOverlay\");\n    }\n    this.#remote(\"getQualities\");\n    this.#remote(\"getChapters\");\n  }\n  #onMethod(method, data, trigger) {\n    switch (method) {\n      case \"getVideoTitle\":\n        const videoTitle = data;\n        this.#ctx.notify(\"title-change\", videoTitle, trigger);\n        break;\n      case \"getDuration\":\n        const duration = data;\n        if (!this.#ctx.$state.canPlay()) {\n          this.#onReady(duration, trigger);\n        } else {\n          this.#ctx.notify(\"duration-change\", duration, trigger);\n        }\n        break;\n      case \"getCurrentTime\":\n        this.#onTimeUpdate(data, trigger);\n        break;\n      case \"getBuffered\":\n        if (isArray(data) && data.length) {\n          this.#onLoadProgress(data[data.length - 1][1], trigger);\n        }\n        break;\n      case \"setMuted\":\n        this.#onVolumeChange(peek(this.#ctx.$state.volume), data, trigger);\n        break;\n      // case 'getTextTracks':\n      //   this.#onTextTracksChange(data as VimeoTextTrack[], trigger);\n      //   break;\n      case \"getChapters\":\n        this.#onChaptersChange(data);\n        break;\n      case \"getQualities\":\n        this.#onQualitiesChange(data, trigger);\n        break;\n    }\n    this.#getPromise(method)?.resolve();\n  }\n  #attachListeners() {\n    for (const type of trackedVimeoEvents) {\n      this.#remote(\"addEventListener\", type);\n    }\n  }\n  #onPause(trigger) {\n    this.#timeRAF.stop();\n    this.#ctx.notify(\"pause\", void 0, trigger);\n  }\n  #onPlay(trigger) {\n    this.#timeRAF.start();\n    this.#ctx.notify(\"play\", void 0, trigger);\n  }\n  #onPlayProgress(trigger) {\n    const { paused } = this.#ctx.$state;\n    if (!paused() && !this.#preventTimeUpdates) {\n      this.#ctx.notify(\"playing\", void 0, trigger);\n    }\n  }\n  #onLoadProgress(buffered, trigger) {\n    const detail = {\n      buffered: new TimeRange(0, buffered),\n      seekable: this.#seekableRange\n    };\n    this.#ctx.notify(\"progress\", detail, trigger);\n  }\n  #onBufferStart(trigger) {\n    this.#ctx.notify(\"waiting\", void 0, trigger);\n  }\n  #onBufferEnd(trigger) {\n    const { paused } = this.#ctx.$state;\n    if (!paused()) this.#ctx.notify(\"playing\", void 0, trigger);\n  }\n  #onWaiting(trigger) {\n    const { paused } = this.#ctx.$state;\n    if (paused()) {\n      this.#ctx.notify(\"play\", void 0, trigger);\n    }\n    this.#ctx.notify(\"waiting\", void 0, trigger);\n  }\n  #onVolumeChange(volume, muted, trigger) {\n    const detail = { volume, muted };\n    this.#ctx.notify(\"volume-change\", detail, trigger);\n  }\n  // #onTextTrackChange(track: VimeoTextTrack, trigger: Event) {\n  //   const textTrack = this.#ctx.textTracks.toArray().find((t) => t.language === track.language);\n  //   if (textTrack) textTrack.mode = track.mode;\n  // }\n  // #onTextTracksChange(tracks: VimeoTextTrack[], trigger: Event) {\n  //   for (const init of tracks) {\n  //     const textTrack = new TextTrack({\n  //       ...init,\n  //       label: init.label.replace('auto-generated', 'auto'),\n  //     });\n  //     textTrack[TextTrackSymbol.readyState] = 2;\n  //     this.#ctx.textTracks.add(textTrack, trigger);\n  //     textTrack.setMode(init.mode, trigger);\n  //   }\n  // }\n  // #onCueChange(cue: VimeoTextCue, trigger: Event) {\n  //   const { textTracks, $state } = this.#ctx,\n  //     { currentTime } = $state,\n  //     track = textTracks.selected;\n  //   if (this.#currentCue) track?.removeCue(this.#currentCue, trigger);\n  //   this.#currentCue = new window.VTTCue(currentTime(), Number.MAX_SAFE_INTEGER, cue.text);\n  //   track?.addCue(this.#currentCue, trigger);\n  // }\n  #onChaptersChange(chapters) {\n    this.#removeChapters();\n    if (!chapters.length) return;\n    const track = new TextTrack({\n      kind: \"chapters\",\n      default: true\n    }), { seekableEnd } = this.#ctx.$state;\n    for (let i = 0; i < chapters.length; i++) {\n      const chapter = chapters[i], nextChapter = chapters[i + 1];\n      track.addCue(\n        new window.VTTCue(\n          chapter.startTime,\n          nextChapter?.startTime ?? seekableEnd(),\n          chapter.title\n        )\n      );\n    }\n    this.#chaptersTrack = track;\n    this.#ctx.textTracks.add(track);\n  }\n  #removeChapters() {\n    if (!this.#chaptersTrack) return;\n    this.#ctx.textTracks.remove(this.#chaptersTrack);\n    this.#chaptersTrack = null;\n  }\n  #onQualitiesChange(qualities, trigger) {\n    this.#ctx.qualities[QualitySymbol.enableAuto] = qualities.some((q) => q.id === \"auto\") ? () => this.#remote(\"setQuality\", \"auto\") : void 0;\n    for (const quality of qualities) {\n      if (quality.id === \"auto\") continue;\n      const height = +quality.id.slice(0, -1);\n      if (isNaN(height)) continue;\n      this.#ctx.qualities[ListSymbol.add](\n        {\n          id: quality.id,\n          width: height * (16 / 9),\n          height,\n          codec: \"avc1,h.264\",\n          bitrate: -1\n        },\n        trigger\n      );\n    }\n    this.#onQualityChange(\n      qualities.find((q) => q.active),\n      trigger\n    );\n  }\n  #onQualityChange({ id } = {}, trigger) {\n    if (!id) return;\n    const isAuto = id === \"auto\", newQuality = this.#ctx.qualities.getById(id);\n    if (isAuto) {\n      this.#ctx.qualities[QualitySymbol.setAuto](isAuto, trigger);\n      this.#ctx.qualities[ListSymbol.select](void 0, true, trigger);\n    } else {\n      this.#ctx.qualities[ListSymbol.select](newQuality ?? void 0, true, trigger);\n    }\n  }\n  #onEvent(event, payload, trigger) {\n    switch (event) {\n      case \"ready\":\n        this.#attachListeners();\n        break;\n      case \"loaded\":\n        this.#onLoaded(trigger);\n        break;\n      case \"play\":\n        this.#onPlay(trigger);\n        break;\n      case \"playProgress\":\n        this.#onPlayProgress(trigger);\n        break;\n      case \"pause\":\n        this.#onPause(trigger);\n        break;\n      case \"loadProgress\":\n        this.#onLoadProgress(payload.seconds, trigger);\n        break;\n      case \"waiting\":\n        this.#onWaiting(trigger);\n        break;\n      case \"bufferstart\":\n        this.#onBufferStart(trigger);\n        break;\n      case \"bufferend\":\n        this.#onBufferEnd(trigger);\n        break;\n      case \"volumechange\":\n        this.#onVolumeChange(payload.volume, peek(this.#ctx.$state.muted), trigger);\n        break;\n      case \"durationchange\":\n        this.#seekableRange = new TimeRange(0, payload.duration);\n        this.#ctx.notify(\"duration-change\", payload.duration, trigger);\n        break;\n      case \"playbackratechange\":\n        this.#ctx.notify(\"rate-change\", payload.playbackRate, trigger);\n        break;\n      case \"qualitychange\":\n        this.#onQualityChange(payload, trigger);\n        break;\n      case \"fullscreenchange\":\n        this.#fullscreenActive = payload.fullscreen;\n        this.#ctx.notify(\"fullscreen-change\", payload.fullscreen, trigger);\n        break;\n      case \"enterpictureinpicture\":\n        this.#ctx.notify(\"picture-in-picture-change\", true, trigger);\n        break;\n      case \"leavepictureinpicture\":\n        this.#ctx.notify(\"picture-in-picture-change\", false, trigger);\n        break;\n      case \"ended\":\n        this.#ctx.notify(\"end\", void 0, trigger);\n        break;\n      case \"error\":\n        this.#onError(payload, trigger);\n        break;\n      case \"seek\":\n      case \"seeked\":\n        this.#onSeeked(payload.seconds, trigger);\n        break;\n    }\n  }\n  #onError(error, trigger) {\n    const { message, method } = error;\n    if (method === \"setPlaybackRate\") {\n      this.#pro.set(false);\n    }\n    if (method) {\n      this.#getPromise(method)?.reject(message);\n    }\n  }\n  onMessage(message, event) {\n    if (message.event) {\n      this.#onEvent(message.event, message.data, event);\n    } else if (message.method) {\n      this.#onMethod(message.method, message.value, event);\n    }\n  }\n  onLoad() {\n  }\n  async #remote(command, arg) {\n    let promise = deferredPromise(), promises = this.#promises.get(command);\n    if (!promises) this.#promises.set(command, promises = []);\n    promises.push(promise);\n    this.postMessage({\n      method: command,\n      value: arg\n    });\n    return promise.promise;\n  }\n  #reset() {\n    this.#timeRAF.stop();\n    this.#seekableRange = new TimeRange(0, 0);\n    this.#videoInfoPromise = null;\n    this.#currentCue = null;\n    this.#pro.set(false);\n    this.#removeChapters();\n  }\n  #getPromise(command) {\n    return this.#promises.get(command)?.shift();\n  }\n}\n\nexport { VimeoProvider };\n"],"names":["trackedVimeoEvents","VimeoProvider","EmbedProvider","createScope","#ctx","#videoId","signal","#pro","#hash","#currentSrc","#fullscreenActive","#seekableRange","TimeRange","#timeRAF","RAFLoop","#onAnimationFrame","#currentCue","#chaptersTrack","#promises","#videoInfoPromise","iframe","ctx","self","#remote","preconnect","effect","#watchVideoId","#watchVideoInfo","#watchPro","#reset","message","promises","reject","muted","time","volume","peek","rate","src","isString","videoId","hash","resolveVimeoVideoId","promise","deferredPromise","abort","getVimeoVideoInfo","info","e","isPro","$state","qualities","ListSymbol","listenEvent","id","keyDisabled","playsInline","nativeControls","showControls","#preventTimeUpdates","#onTimeUpdate","trigger","realCurrentTime","paused","bufferedEnd","seekableEnd","live","prevTime","#onSeeked","#onLoaded","title","poster","duration","pro","#onReady","showEmbedControls","detail","#onMethod","method","data","videoTitle","isArray","#onLoadProgress","#onVolumeChange","#onChaptersChange","#onQualitiesChange","#getPromise","#attachListeners","type","#onPause","#onPlay","#onPlayProgress","buffered","#onBufferStart","#onBufferEnd","#onWaiting","chapters","#removeChapters","track","TextTrack","chapter","nextChapter","QualitySymbol","q","quality","height","#onQualityChange","isAuto","newQuality","#onEvent","event","payload","#onError","error","command","arg"],"mappings":"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","x_google_ignoreList":[0]}